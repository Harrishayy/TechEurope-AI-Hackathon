<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>TACTICAL HUD</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Share+Tech+Mono&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --cyan: #00f0ff;
    --cyan-dim: rgba(0, 240, 255, 0.4);
    --cyan-glow: rgba(0, 240, 255, 0.15);
    --cyan-ultra-dim: rgba(0, 240, 255, 0.07);
    --amber: #ffaa00;
    --amber-dim: rgba(255, 170, 0, 0.5);
    --red: #ff3344;
    --green: #00ff88;
    --white: rgba(255, 255, 255, 0.9);
    --white-dim: rgba(255, 255, 255, 0.3);
    --panel-bg: rgba(0, 10, 20, 0.55);
    --panel-border: rgba(0, 240, 255, 0.2);
    --font-mono: 'Share Tech Mono', monospace;
    --font-display: 'Orbitron', sans-serif;
  }

  html, body {
    height: 100%;
    overflow: hidden;
    background: #000;
    font-family: var(--font-mono);
    color: var(--cyan);
    -webkit-font-smoothing: antialiased;
    cursor: none;
  }

  /* ═══ CAMERA ═══ */
  #cameraFeed {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  /* Scanline overlay */
  .scanlines {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.03) 2px,
      rgba(0, 0, 0, 0.03) 4px
    );
  }

  /* Vignette */
  .vignette {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.6) 100%);
  }

  /* ═══ HUD LAYER ═══ */
  .hud {
    position: fixed;
    inset: 0;
    z-index: 10;
    pointer-events: none;
    overflow: hidden;
  }

  /* ═══ CORNER BRACKETS ═══ */
  .corner {
    position: absolute;
    width: 60px;
    height: 60px;
    border-color: var(--cyan);
    border-style: solid;
    border-width: 0;
    opacity: 0.7;
    animation: cornerPulse 3s ease-in-out infinite;
  }
  .corner-tl { top: 20px; left: 20px; border-top-width: 2px; border-left-width: 2px; }
  .corner-tr { top: 20px; right: 20px; border-top-width: 2px; border-right-width: 2px; }
  .corner-bl { bottom: 20px; left: 20px; border-bottom-width: 2px; border-left-width: 2px; }
  .corner-br { bottom: 20px; right: 20px; border-bottom-width: 2px; border-right-width: 2px; }

  @keyframes cornerPulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  /* Inner corners */
  .corner-inner {
    position: absolute;
    width: 30px;
    height: 30px;
    border-color: var(--cyan-dim);
    border-style: solid;
    border-width: 0;
  }
  .corner-inner-tl { top: 35px; left: 35px; border-top-width: 1px; border-left-width: 1px; }
  .corner-inner-tr { top: 35px; right: 35px; border-top-width: 1px; border-right-width: 1px; }
  .corner-inner-bl { bottom: 35px; left: 35px; border-bottom-width: 1px; border-left-width: 1px; }
  .corner-inner-br { bottom: 35px; right: 35px; border-bottom-width: 1px; border-right-width: 1px; }

  /* ═══ TOP BAR ═══ */
  .top-bar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 12px 20px;
    padding-top: max(12px, env(safe-area-inset-top));
  }

  .top-left, .top-center, .top-right {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .top-center {
    align-items: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 12px;
    top: max(12px, env(safe-area-inset-top));
  }

  .top-right { align-items: flex-end; }

  .label {
    font-family: var(--font-display);
    font-size: 8px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--cyan-dim);
    text-transform: uppercase;
  }

  .value {
    font-size: 12px;
    letter-spacing: 1px;
    text-shadow: 0 0 8px var(--cyan-glow);
  }

  .system-title {
    font-family: var(--font-display);
    font-size: 14px;
    font-weight: 900;
    letter-spacing: 4px;
    color: var(--cyan);
    text-shadow: 0 0 20px var(--cyan-dim), 0 0 40px var(--cyan-ultra-dim);
  }

  .system-subtitle {
    font-size: 9px;
    letter-spacing: 3px;
    color: var(--cyan-dim);
    text-align: center;
  }

  .status-online {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    letter-spacing: 1px;
  }

  .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 8px var(--green);
    animation: statusPulse 2s ease-in-out infinite;
  }

  @keyframes statusPulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 8px var(--green); }
    50% { opacity: 0.5; box-shadow: 0 0 2px var(--green); }
  }

  /* ═══ COMPASS STRIP ═══ */
  .compass-strip {
    position: absolute;
    top: 70px;
    top: calc(max(12px, env(safe-area-inset-top)) + 58px);
    left: 50%;
    transform: translateX(-50%);
    width: 280px;
    height: 28px;
    overflow: hidden;
    border-left: 1px solid var(--cyan-dim);
    border-right: 1px solid var(--cyan-dim);
  }

  .compass-strip::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid var(--cyan);
    z-index: 2;
    filter: drop-shadow(0 0 4px var(--cyan));
  }

  .compass-inner {
    display: flex;
    align-items: center;
    height: 100%;
    font-size: 10px;
    letter-spacing: 1px;
    white-space: nowrap;
    will-change: transform;
  }

  .compass-mark {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    color: var(--cyan-dim);
    font-size: 9px;
  }

  .compass-mark.cardinal {
    color: var(--cyan);
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 11px;
    text-shadow: 0 0 6px var(--cyan-dim);
  }

  .compass-tick {
    width: 1px;
    height: 8px;
    background: var(--cyan-dim);
    margin: 0 19px;
  }

  .compass-tick.major {
    height: 14px;
    background: var(--cyan);
  }

  /* ═══ CENTER RETICLE ═══ */
  .reticle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
  }

  .reticle svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 0 6px var(--cyan-dim));
  }

  .reticle-ring-outer {
    fill: none;
    stroke: var(--cyan);
    stroke-width: 1;
    opacity: 0.6;
    transform-origin: center;
    animation: rotateRing 12s linear infinite;
  }

  .reticle-ring-inner {
    fill: none;
    stroke: var(--cyan);
    stroke-width: 1.5;
    opacity: 0.8;
    transform-origin: center;
    animation: rotateRing 8s linear infinite reverse;
  }

  .reticle-ring-core {
    fill: none;
    stroke: var(--cyan);
    stroke-width: 1;
    opacity: 0.4;
    transform-origin: center;
    animation: rotateRing 20s linear infinite;
  }

  @keyframes rotateRing {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .reticle-crosshair {
    stroke: var(--cyan);
    stroke-width: 0.5;
    opacity: 0.5;
  }

  .reticle-center-dot {
    fill: var(--cyan);
    opacity: 0.8;
    animation: centerPulse 2s ease-in-out infinite;
  }

  @keyframes centerPulse {
    0%, 100% { opacity: 0.8; r: 2; }
    50% { opacity: 0.3; r: 3; }
  }

  /* Reticle data arcs */
  .arc-data {
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    opacity: 0.6;
  }

  .arc-data-1 {
    stroke: var(--cyan);
    stroke-dasharray: 30 15 10 15;
    transform-origin: center;
    animation: rotateRing 6s linear infinite;
  }

  .arc-data-2 {
    stroke: var(--amber);
    stroke-dasharray: 20 30 5 20;
    transform-origin: center;
    animation: rotateRing 10s linear infinite reverse;
  }

  /* ═══ LEFT PANEL — TELEMETRY ═══ */
  .panel-left {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 130px;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .telemetry-block {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: 2px;
    padding: 6px 8px;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .telemetry-label {
    font-family: var(--font-display);
    font-size: 7px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--cyan-dim);
    margin-bottom: 2px;
  }

  .telemetry-value {
    font-size: 14px;
    letter-spacing: 1px;
    color: var(--cyan);
    text-shadow: 0 0 8px var(--cyan-glow);
  }

  .telemetry-bar {
    height: 2px;
    background: var(--cyan-ultra-dim);
    margin-top: 4px;
    border-radius: 1px;
    overflow: hidden;
  }

  .telemetry-bar-fill {
    height: 100%;
    background: var(--cyan);
    border-radius: 1px;
    transition: width 1s ease;
    box-shadow: 0 0 6px var(--cyan-dim);
  }

  .telemetry-bar-fill.amber { background: var(--amber); box-shadow: 0 0 6px var(--amber-dim); }
  .telemetry-bar-fill.green { background: var(--green); box-shadow: 0 0 6px rgba(0,255,136,0.5); }

  /* ═══ RIGHT PANEL — SYSTEMS ═══ */
  .panel-right {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 130px;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .sys-block {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: 2px;
    padding: 6px 8px;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .sys-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 9px;
    letter-spacing: 0.5px;
    padding: 1px 0;
  }

  .sys-row .sys-label { color: var(--white-dim); }
  .sys-row .sys-val { color: var(--cyan); }
  .sys-row .sys-val.ok { color: var(--green); }
  .sys-row .sys-val.warn { color: var(--amber); }

  /* ═══ BOTTOM PANEL ═══ */
  .bottom-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 12px 20px;
    padding-bottom: max(12px, env(safe-area-inset-bottom));
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
  }

  .bottom-left, .bottom-right {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .bottom-right { align-items: flex-end; }

  /* ═══ RADAR ═══ */
  .radar-container {
    position: absolute;
    bottom: 60px;
    bottom: calc(max(12px, env(safe-area-inset-bottom)) + 48px);
    left: 20px;
    width: 90px;
    height: 90px;
  }

  .radar-container svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 0 4px var(--cyan-ultra-dim));
  }

  .radar-grid {
    fill: none;
    stroke: var(--cyan);
    opacity: 0.15;
  }

  .radar-sweep {
    transform-origin: center;
    animation: radarSweep 4s linear infinite;
  }

  @keyframes radarSweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .radar-blip {
    fill: var(--cyan);
    opacity: 0;
    animation: blip 4s ease-out infinite;
  }

  .radar-blip:nth-child(2) { animation-delay: 1.3s; }
  .radar-blip:nth-child(3) { animation-delay: 2.7s; }

  @keyframes blip {
    0% { opacity: 0; }
    10% { opacity: 1; }
    100% { opacity: 0; }
  }

  /* ═══ THREAT GRID ═══ */
  .threat-grid {
    position: absolute;
    bottom: 60px;
    bottom: calc(max(12px, env(safe-area-inset-bottom)) + 48px);
    right: 20px;
    width: 90px;
    height: 90px;
  }

  .threat-grid svg {
    width: 100%;
    height: 100%;
  }

  .grid-line {
    stroke: var(--cyan);
    stroke-width: 0.5;
    opacity: 0.12;
  }

  .grid-scan-h {
    stroke: var(--cyan);
    stroke-width: 1;
    opacity: 0.6;
    animation: scanH 3s ease-in-out infinite;
  }

  .grid-scan-v {
    stroke: var(--cyan);
    stroke-width: 1;
    opacity: 0.6;
    animation: scanV 4s ease-in-out infinite;
  }

  @keyframes scanH {
    0%, 100% { transform: translateY(0); opacity: 0.6; }
    50% { transform: translateY(80px); opacity: 0.2; }
  }

  @keyframes scanV {
    0%, 100% { transform: translateX(0); opacity: 0.6; }
    50% { transform: translateX(80px); opacity: 0.2; }
  }

  /* ═══ HORIZONTAL LINES ═══ */
  .h-line {
    position: absolute;
    left: 90px;
    right: 90px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--cyan-ultra-dim) 20%, var(--cyan-ultra-dim) 80%, transparent);
  }

  .h-line-top {
    top: calc(max(12px, env(safe-area-inset-top)) + 55px);
  }

  .h-line-bottom {
    bottom: calc(max(12px, env(safe-area-inset-bottom)) + 42px);
  }

  /* ═══ SIDE TICKS ═══ */
  .side-ticks {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .side-ticks-left { left: 8px; align-items: flex-start; }
  .side-ticks-right { right: 8px; align-items: flex-end; }

  .side-tick {
    width: 4px;
    height: 1px;
    background: var(--cyan-dim);
  }

  .side-tick.long { width: 8px; background: var(--cyan); }

  /* ═══ DATA STREAM (scrolling text) ═══ */
  .data-stream {
    position: absolute;
    right: 155px;
    top: 50%;
    transform: translateY(-50%);
    height: 200px;
    width: 100px;
    overflow: hidden;
    opacity: 0.25;
    font-size: 8px;
    line-height: 1.6;
    letter-spacing: 0.5px;
    color: var(--cyan);
    mask-image: linear-gradient(to bottom, transparent 0%, white 20%, white 80%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, white 20%, white 80%, transparent 100%);
  }

  .data-stream-content {
    animation: scrollStream 20s linear infinite;
  }

  @keyframes scrollStream {
    0% { transform: translateY(0); }
    100% { transform: translateY(-50%); }
  }

  /* ═══ BOOT SEQUENCE ═══ */
  .boot-screen {
    position: fixed;
    inset: 0;
    z-index: 100;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 0.8s ease;
  }

  .boot-screen.fade-out {
    opacity: 0;
    pointer-events: none;
  }

  .boot-screen.hidden {
    display: none;
  }

  .boot-text {
    font-family: var(--font-mono);
    font-size: 12px;
    color: var(--cyan);
    text-align: left;
    width: 320px;
    line-height: 1.8;
  }

  .boot-line {
    opacity: 0;
    animation: bootFadeIn 0.1s forwards;
  }

  @keyframes bootFadeIn {
    to { opacity: 1; }
  }

  .boot-cursor {
    display: inline-block;
    width: 7px;
    height: 14px;
    background: var(--cyan);
    animation: blink 0.6s step-end infinite;
    vertical-align: middle;
    margin-left: 2px;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .boot-logo {
    font-family: var(--font-display);
    font-size: 28px;
    font-weight: 900;
    letter-spacing: 8px;
    color: var(--cyan);
    text-shadow: 0 0 30px var(--cyan-dim), 0 0 60px var(--cyan-ultra-dim);
    margin-bottom: 40px;
    opacity: 0;
    animation: bootFadeIn 0.5s 0.2s forwards;
  }

  /* ═══ PERMISSION PROMPT ═══ */
  .permission-prompt {
    position: fixed;
    inset: 0;
    z-index: 200;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }

  .permission-prompt.hidden { display: none; }

  .permission-icon {
    width: 80px;
    height: 80px;
    border: 2px solid var(--cyan);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    animation: cornerPulse 2s ease-in-out infinite;
  }

  .permission-text {
    font-family: var(--font-display);
    font-size: 14px;
    letter-spacing: 3px;
    color: var(--cyan);
    text-align: center;
  }

  .permission-sub {
    font-size: 11px;
    color: var(--cyan-dim);
    letter-spacing: 1px;
  }

  .btn-activate {
    font-family: var(--font-display);
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 3px;
    color: #000;
    background: var(--cyan);
    border: none;
    padding: 14px 40px;
    cursor: pointer;
    text-transform: uppercase;
    transition: all 0.2s;
    pointer-events: auto;
    box-shadow: 0 0 20px var(--cyan-dim), 0 0 40px var(--cyan-ultra-dim);
  }

  .btn-activate:hover {
    box-shadow: 0 0 30px var(--cyan-dim), 0 0 60px var(--cyan-ultra-dim);
    transform: scale(1.02);
  }

  .btn-activate:active { transform: scale(0.98); }

  /* ═══ RESPONSIVE ═══ */
  @media (max-width: 500px) {
    .panel-left, .panel-right { display: none; }
    .data-stream { display: none; }
    .side-ticks { display: none; }

    .reticle { width: 150px; height: 150px; }

    .radar-container { width: 70px; height: 70px; }
    .threat-grid { width: 70px; height: 70px; }

    .corner { width: 40px; height: 40px; }
    .corner-inner { width: 20px; height: 20px; }
    .corner-inner-tl { top: 28px; left: 28px; }
    .corner-inner-tr { top: 28px; right: 28px; }
    .corner-inner-bl { bottom: 28px; left: 28px; }
    .corner-inner-br { bottom: 28px; right: 28px; }

    .h-line { left: 50px; right: 50px; }
  }

  @media (min-width: 501px) and (max-width: 800px) {
    .panel-left { width: 100px; }
    .panel-right { width: 100px; }
    .data-stream { display: none; }
  }
</style>
</head>
<body>

<!-- Permission Prompt -->
<div class="permission-prompt" id="permissionPrompt">
  <div class="permission-icon">&#9673;</div>
  <div class="permission-text">CAMERA ACCESS REQUIRED</div>
  <div class="permission-sub">Tactical HUD requires visual feed</div>
  <button class="btn-activate" id="btnActivate">INITIALIZE SYSTEM</button>
</div>

<!-- Boot Sequence -->
<div class="boot-screen hidden" id="bootScreen">
  <div class="boot-logo">TACNET v4.7</div>
  <div class="boot-text" id="bootText"></div>
</div>

<!-- Camera -->
<video id="cameraFeed" autoplay playsinline muted></video>

<!-- Overlays -->
<div class="scanlines"></div>
<div class="vignette"></div>

<!-- HUD -->
<div class="hud" id="hud" style="opacity:0">

  <!-- Corner brackets -->
  <div class="corner corner-tl"></div>
  <div class="corner corner-tr"></div>
  <div class="corner corner-bl"></div>
  <div class="corner corner-br"></div>
  <div class="corner-inner corner-inner-tl"></div>
  <div class="corner-inner corner-inner-tr"></div>
  <div class="corner-inner corner-inner-bl"></div>
  <div class="corner-inner corner-inner-br"></div>

  <!-- Horizontal divider lines -->
  <div class="h-line h-line-top"></div>
  <div class="h-line h-line-bottom"></div>

  <!-- Top bar -->
  <div class="top-bar">
    <div class="top-left">
      <div class="label">LOCAL TIME</div>
      <div class="value" id="hudTime">00:00:00</div>
      <div class="label" style="margin-top:4px">DATE</div>
      <div class="value" id="hudDate">2026.02.21</div>
    </div>
    <div class="top-center">
      <div class="system-title">TACNET</div>
      <div class="system-subtitle">AUGMENTED REALITY SYSTEM</div>
      <div class="status-online" style="margin-top:4px;justify-content:center">
        <div class="status-dot"></div>
        <span style="color:var(--green);font-size:9px;letter-spacing:2px">SYSTEM ONLINE</span>
      </div>
    </div>
    <div class="top-right">
      <div class="label">POSITION</div>
      <div class="value" id="hudCoords">--°--'--" N</div>
      <div class="value" id="hudCoords2">--°--'--" W</div>
      <div class="label" style="margin-top:4px">FPS</div>
      <div class="value" id="hudFps">--</div>
    </div>
  </div>

  <!-- Compass -->
  <div class="compass-strip">
    <div class="compass-inner" id="compassInner"></div>
  </div>

  <!-- Center reticle -->
  <div class="reticle">
    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <!-- Outer ring -->
      <circle cx="100" cy="100" r="90" class="reticle-ring-outer" stroke-dasharray="8 4 2 4" />
      <!-- Data arcs -->
      <circle cx="100" cy="100" r="78" class="arc-data arc-data-1" />
      <circle cx="100" cy="100" r="72" class="arc-data arc-data-2" />
      <!-- Inner ring -->
      <circle cx="100" cy="100" r="55" class="reticle-ring-inner" stroke-dasharray="12 6 3 6" />
      <!-- Core ring -->
      <circle cx="100" cy="100" r="35" class="reticle-ring-core" stroke-dasharray="4 8" />
      <!-- Crosshairs -->
      <line x1="100" y1="60" x2="100" y2="85" class="reticle-crosshair" />
      <line x1="100" y1="115" x2="100" y2="140" class="reticle-crosshair" />
      <line x1="60" y1="100" x2="85" y2="100" class="reticle-crosshair" />
      <line x1="115" y1="100" x2="140" y2="100" class="reticle-crosshair" />
      <!-- Diagonal ticks -->
      <line x1="75" y1="75" x2="82" y2="82" class="reticle-crosshair" />
      <line x1="125" y1="75" x2="118" y2="82" class="reticle-crosshair" />
      <line x1="75" y1="125" x2="82" y2="118" class="reticle-crosshair" />
      <line x1="125" y1="125" x2="118" y2="118" class="reticle-crosshair" />
      <!-- Center dot -->
      <circle cx="100" cy="100" r="2" class="reticle-center-dot" />
      <!-- Small cardinal marks -->
      <text x="100" y="52" text-anchor="middle" fill="var(--cyan)" font-family="var(--font-mono)" font-size="7" opacity="0.5">0</text>
      <text x="100" y="155" text-anchor="middle" fill="var(--cyan)" font-family="var(--font-mono)" font-size="7" opacity="0.5">180</text>
      <text x="48" y="103" text-anchor="middle" fill="var(--cyan)" font-family="var(--font-mono)" font-size="7" opacity="0.5">270</text>
      <text x="152" y="103" text-anchor="middle" fill="var(--cyan)" font-family="var(--font-mono)" font-size="7" opacity="0.5">90</text>
    </svg>
  </div>

  <!-- Left panel — Telemetry -->
  <div class="panel-left">
    <div class="telemetry-block">
      <div class="telemetry-label">HEART RATE</div>
      <div class="telemetry-value" id="telHr">72 BPM</div>
      <div class="telemetry-bar"><div class="telemetry-bar-fill green" id="hrBar" style="width:72%"></div></div>
    </div>
    <div class="telemetry-block">
      <div class="telemetry-label">BLOOD O2</div>
      <div class="telemetry-value" id="telO2">98%</div>
      <div class="telemetry-bar"><div class="telemetry-bar-fill" id="o2Bar" style="width:98%"></div></div>
    </div>
    <div class="telemetry-block">
      <div class="telemetry-label">CORE TEMP</div>
      <div class="telemetry-value" id="telTemp">36.8°C</div>
      <div class="telemetry-bar"><div class="telemetry-bar-fill" style="width:68%"></div></div>
    </div>
    <div class="telemetry-block">
      <div class="telemetry-label">POWER CELL</div>
      <div class="telemetry-value" id="telPower">87%</div>
      <div class="telemetry-bar"><div class="telemetry-bar-fill amber" id="powerBar" style="width:87%"></div></div>
    </div>
    <div class="telemetry-block">
      <div class="telemetry-label">ALTITUDE</div>
      <div class="telemetry-value" id="telAlt">47m ASL</div>
    </div>
  </div>

  <!-- Right panel — Systems -->
  <div class="panel-right">
    <div class="sys-block">
      <div class="telemetry-label">SUBSYSTEMS</div>
      <div class="sys-row"><span class="sys-label">OPTICS</span><span class="sys-val ok">ONLINE</span></div>
      <div class="sys-row"><span class="sys-label">NAV</span><span class="sys-val ok">ONLINE</span></div>
      <div class="sys-row"><span class="sys-label">COMMS</span><span class="sys-val ok">ONLINE</span></div>
      <div class="sys-row"><span class="sys-label">SHIELD</span><span class="sys-val warn">STANDBY</span></div>
      <div class="sys-row"><span class="sys-label">WEAPONS</span><span class="sys-val" style="color:var(--red)">LOCKED</span></div>
    </div>
    <div class="sys-block">
      <div class="telemetry-label">NETWORK</div>
      <div class="sys-row"><span class="sys-label">LATENCY</span><span class="sys-val" id="sysLatency">12ms</span></div>
      <div class="sys-row"><span class="sys-label">NODES</span><span class="sys-val" id="sysNodes">7</span></div>
      <div class="sys-row"><span class="sys-label">ENCRYPT</span><span class="sys-val ok">AES-512</span></div>
    </div>
    <div class="sys-block">
      <div class="telemetry-label">THREAT LEVEL</div>
      <div class="sys-row"><span class="sys-label">STATUS</span><span class="sys-val ok" id="threatStatus">CLEAR</span></div>
      <div class="sys-row"><span class="sys-label">CONTACTS</span><span class="sys-val" id="threatContacts">0</span></div>
    </div>
  </div>

  <!-- Side ticks -->
  <div class="side-ticks side-ticks-left" id="sideTicksL"></div>
  <div class="side-ticks side-ticks-right" id="sideTicksR"></div>

  <!-- Data stream -->
  <div class="data-stream">
    <div class="data-stream-content" id="dataStream"></div>
  </div>

  <!-- Radar -->
  <div class="radar-container">
    <svg viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg">
      <circle cx="45" cy="45" r="40" class="radar-grid" stroke-width="0.5" />
      <circle cx="45" cy="45" r="27" class="radar-grid" stroke-width="0.5" />
      <circle cx="45" cy="45" r="14" class="radar-grid" stroke-width="0.5" />
      <line x1="5" y1="45" x2="85" y2="45" class="radar-grid" stroke-width="0.3" />
      <line x1="45" y1="5" x2="45" y2="85" class="radar-grid" stroke-width="0.3" />
      <!-- Sweep -->
      <g class="radar-sweep">
        <line x1="45" y1="45" x2="45" y2="5" stroke="var(--cyan)" stroke-width="1" opacity="0.8" />
        <path d="M 45 45 L 45 5 A 40 40 0 0 1 73 17 Z" fill="url(#sweepGrad)" />
      </g>
      <defs>
        <linearGradient id="sweepGrad" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="var(--cyan)" stop-opacity="0.3" />
          <stop offset="100%" stop-color="var(--cyan)" stop-opacity="0" />
        </linearGradient>
      </defs>
      <!-- Blips -->
      <circle cx="58" cy="28" r="2" class="radar-blip" />
      <circle cx="32" cy="55" r="2" class="radar-blip" />
      <circle cx="65" cy="60" r="1.5" class="radar-blip" />
      <!-- Center -->
      <circle cx="45" cy="45" r="2" fill="var(--cyan)" opacity="0.9" />
    </svg>
  </div>

  <!-- Threat Grid -->
  <div class="threat-grid">
    <svg viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg">
      <!-- Grid lines -->
      <line x1="0" y1="0" x2="90" y2="0" class="grid-line" />
      <line x1="0" y1="15" x2="90" y2="15" class="grid-line" />
      <line x1="0" y1="30" x2="90" y2="30" class="grid-line" />
      <line x1="0" y1="45" x2="90" y2="45" class="grid-line" />
      <line x1="0" y1="60" x2="90" y2="60" class="grid-line" />
      <line x1="0" y1="75" x2="90" y2="75" class="grid-line" />
      <line x1="0" y1="90" x2="90" y2="90" class="grid-line" />
      <line x1="0" y1="0" x2="0" y2="90" class="grid-line" />
      <line x1="15" y1="0" x2="15" y2="90" class="grid-line" />
      <line x1="30" y1="0" x2="30" y2="90" class="grid-line" />
      <line x1="45" y1="0" x2="45" y2="90" class="grid-line" />
      <line x1="60" y1="0" x2="60" y2="90" class="grid-line" />
      <line x1="75" y1="0" x2="75" y2="90" class="grid-line" />
      <line x1="90" y1="0" x2="90" y2="90" class="grid-line" />
      <!-- Scan lines -->
      <line x1="0" y1="0" x2="90" y2="0" class="grid-scan-h" />
      <line x1="0" y1="0" x2="0" y2="90" class="grid-scan-v" />
      <!-- Zone label -->
      <text x="45" y="48" text-anchor="middle" fill="var(--cyan)" font-family="var(--font-display)" font-size="6" letter-spacing="2" opacity="0.5">SECTOR 7G</text>
    </svg>
  </div>

  <!-- Bottom bar -->
  <div class="bottom-bar">
    <div class="bottom-left">
      <div class="label">MISSION</div>
      <div class="value" style="font-size:10px" id="missionTimer">00:00:00</div>
    </div>
    <div class="bottom-right">
      <div class="label">FEED RES</div>
      <div class="value" style="font-size:10px" id="feedRes">--x--</div>
    </div>
  </div>

</div>

<script>
(function() {
  'use strict';

  // ═══ ELEMENTS ═══
  const video = document.getElementById('cameraFeed');
  const hud = document.getElementById('hud');
  const permissionPrompt = document.getElementById('permissionPrompt');
  const btnActivate = document.getElementById('btnActivate');
  const bootScreen = document.getElementById('bootScreen');
  const bootText = document.getElementById('bootText');

  // ═══ BOOT SEQUENCE ═══
  const bootLines = [
    'TACNET KERNEL v4.7.2 LOADING...',
    'INIT MEMORY............ 64GB OK',
    'INIT GPU CORES......... 2048 OK',
    'OPTICAL ARRAY........... LINKED',
    'LOADING NEURAL MESH..... DONE',
    'CALIBRATING SENSORS..... DONE',
    'GEOLOCATION............ ACTIVE',
    'THREAT DETECTION........ ARMED',
    'BIOMETRIC LINK......... SYNCED',
    'ENCRYPTION............. AES-512',
    'COMMS UPLINK............ SECURE',
    '',
    'ALL SYSTEMS NOMINAL.',
    'WELCOME, OPERATOR.',
  ];

  function runBootSequence() {
    bootScreen.classList.remove('hidden');
    bootText.innerHTML = '';

    let i = 0;
    function addLine() {
      if (i >= bootLines.length) {
        setTimeout(() => {
          bootScreen.classList.add('fade-out');
          setTimeout(() => {
            bootScreen.classList.add('hidden');
            hud.style.transition = 'opacity 1s ease';
            hud.style.opacity = '1';
            startHUD();
          }, 800);
        }, 600);
        return;
      }

      const line = document.createElement('div');
      line.className = 'boot-line';
      line.style.animationDelay = '0s';

      if (i === bootLines.length - 1) {
        line.innerHTML = bootLines[i] + ' <span class="boot-cursor"></span>';
      } else {
        line.textContent = bootLines[i];
      }

      bootText.appendChild(line);
      bootText.scrollTop = bootText.scrollHeight;
      i++;

      const delay = bootLines[i - 1] === '' ? 200 : 80 + Math.random() * 60;
      setTimeout(addLine, delay);
    }

    addLine();
  }

  // ═══ CAMERA INIT ═══
  btnActivate.addEventListener('click', async () => {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: 'environment', width: { ideal: 1920 }, height: { ideal: 1080 } }
      });
      video.srcObject = stream;
      video.play();
      permissionPrompt.classList.add('hidden');
      runBootSequence();
    } catch (err) {
      // Try front camera as fallback
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: 'user', width: { ideal: 1920 }, height: { ideal: 1080 } }
        });
        video.srcObject = stream;
        video.play();
        permissionPrompt.classList.add('hidden');
        runBootSequence();
      } catch (err2) {
        alert('Camera access denied. HUD requires camera feed.');
      }
    }
  });

  // ═══ COMPASS GENERATION ═══
  function buildCompass() {
    const container = document.getElementById('compassInner');
    const dirs = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
    const degs = [0, 22.5, 45, 67.5, 90, 112.5, 135, 157.5, 180, 202.5, 225, 247.5, 270, 292.5, 315, 337.5];

    // Build twice for seamless loop
    let html = '';
    for (let rep = 0; rep < 2; rep++) {
      for (let i = 0; i < dirs.length; i++) {
        const isCardinal = dirs[i].length === 1;
        html += `<span class="compass-mark ${isCardinal ? 'cardinal' : ''}">${Math.round(degs[i])}°${dirs[i]}</span>`;
        html += `<span class="compass-tick ${isCardinal ? 'major' : ''}"></span>`;
      }
    }
    container.innerHTML = html;
  }

  // ═══ SIDE TICKS ═══
  function buildSideTicks() {
    const left = document.getElementById('sideTicksL');
    const right = document.getElementById('sideTicksR');
    let html = '';
    for (let i = 0; i < 20; i++) {
      html += `<div class="side-tick ${i % 5 === 0 ? 'long' : ''}"></div>`;
    }
    left.innerHTML = html;
    right.innerHTML = html;
  }

  // ═══ DATA STREAM ═══
  function buildDataStream() {
    const el = document.getElementById('dataStream');
    const entries = [];
    const prefixes = ['SYS', 'NET', 'OPT', 'NAV', 'SEC', 'BIO', 'PWR', 'COM', 'TGT', 'RAD'];
    const hex = '0123456789ABCDEF';

    for (let i = 0; i < 60; i++) {
      const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
      let val = '';
      for (let j = 0; j < 8; j++) val += hex[Math.floor(Math.random() * 16)];
      entries.push(`${prefix}:0x${val}`);
    }

    // Duplicate for seamless scroll
    const text = entries.join('\n') + '\n' + entries.join('\n');
    el.textContent = text;
  }

  // ═══ GEOLOCATION ═══
  let currentLat = null, currentLon = null;

  function formatCoord(deg, pos, neg) {
    const dir = deg >= 0 ? pos : neg;
    deg = Math.abs(deg);
    const d = Math.floor(deg);
    const m = Math.floor((deg - d) * 60);
    const s = ((deg - d - m / 60) * 3600).toFixed(1);
    return `${d}°${String(m).padStart(2,'0')}'${String(s).padStart(4,'0')}" ${dir}`;
  }

  function updateGeo() {
    if ('geolocation' in navigator) {
      navigator.geolocation.getCurrentPosition(pos => {
        currentLat = pos.coords.latitude;
        currentLon = pos.coords.longitude;
        document.getElementById('hudCoords').textContent = formatCoord(currentLat, 'N', 'S');
        document.getElementById('hudCoords2').textContent = formatCoord(currentLon, 'E', 'W');
        if (pos.coords.altitude !== null) {
          document.getElementById('telAlt').textContent = Math.round(pos.coords.altitude) + 'm ASL';
        }
      }, () => {
        document.getElementById('hudCoords').textContent = '51°30\'26.4" N';
        document.getElementById('hudCoords2').textContent = '0°07\'39.5" W';
      });
    }
  }

  // ═══ HUD DATA UPDATE LOOP ═══
  let missionStart = null;
  let frameCount = 0;
  let lastFpsTime = 0;
  let compassOffset = 0;
  let compassDir = 1;
  let currentHeading = 0;
  let powerLevel = 87;

  function updateHUD(timestamp) {
    // FPS
    frameCount++;
    if (timestamp - lastFpsTime >= 1000) {
      document.getElementById('hudFps').textContent = frameCount;
      frameCount = 0;
      lastFpsTime = timestamp;
    }

    // Time
    const now = new Date();
    document.getElementById('hudTime').textContent =
      String(now.getHours()).padStart(2, '0') + ':' +
      String(now.getMinutes()).padStart(2, '0') + ':' +
      String(now.getSeconds()).padStart(2, '0');

    const dateStr = now.getFullYear() + '.' +
      String(now.getMonth() + 1).padStart(2, '0') + '.' +
      String(now.getDate()).padStart(2, '0');
    document.getElementById('hudDate').textContent = dateStr;

    // Mission timer
    if (missionStart) {
      const elapsed = Math.floor((Date.now() - missionStart) / 1000);
      const h = String(Math.floor(elapsed / 3600)).padStart(2, '0');
      const m = String(Math.floor((elapsed % 3600) / 60)).padStart(2, '0');
      const s = String(elapsed % 60).padStart(2, '0');
      document.getElementById('missionTimer').textContent = `${h}:${m}:${s}`;
    }

    // Compass drift (simulated gentle heading change)
    currentHeading += (Math.random() - 0.48) * 0.3;
    if (currentHeading < 0) currentHeading += 360;
    if (currentHeading >= 360) currentHeading -= 360;
    const compassEl = document.getElementById('compassInner');
    const totalWidth = compassEl.scrollWidth / 2;
    const offset = (currentHeading / 360) * totalWidth;
    compassEl.style.transform = `translateX(calc(-${offset}px + 140px))`;

    // Feed resolution
    if (video.videoWidth) {
      document.getElementById('feedRes').textContent = video.videoWidth + 'x' + video.videoHeight;
    }

    // Biometric jitter
    if (Math.random() < 0.05) {
      const hr = 68 + Math.floor(Math.random() * 12);
      document.getElementById('telHr').textContent = hr + ' BPM';
      document.getElementById('hrBar').style.width = hr + '%';
    }
    if (Math.random() < 0.03) {
      const o2 = 96 + Math.floor(Math.random() * 4);
      document.getElementById('telO2').textContent = o2 + '%';
      document.getElementById('o2Bar').style.width = o2 + '%';
    }
    if (Math.random() < 0.02) {
      const temp = (36.5 + Math.random() * 0.6).toFixed(1);
      document.getElementById('telTemp').textContent = temp + '°C';
    }

    // Power drain
    if (Math.random() < 0.01) {
      powerLevel = Math.max(20, powerLevel - 0.1);
      document.getElementById('telPower').textContent = Math.round(powerLevel) + '%';
      document.getElementById('powerBar').style.width = powerLevel + '%';
    }

    // Network jitter
    if (Math.random() < 0.04) {
      const lat = 8 + Math.floor(Math.random() * 15);
      document.getElementById('sysLatency').textContent = lat + 'ms';
      document.getElementById('sysNodes').textContent = 5 + Math.floor(Math.random() * 5);
    }

    requestAnimationFrame(updateHUD);
  }

  // ═══ DEVICE ORIENTATION ═══
  function initOrientation() {
    if (window.DeviceOrientationEvent) {
      // iOS 13+ requires permission
      if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission().then(state => {
          if (state === 'granted') {
            window.addEventListener('deviceorientation', handleOrientation);
          }
        }).catch(() => {});
      } else {
        window.addEventListener('deviceorientation', handleOrientation);
      }
    }
  }

  function handleOrientation(e) {
    if (e.alpha !== null) {
      // alpha is compass heading on some devices (0-360)
      currentHeading = e.alpha;
    }
  }

  // ═══ START HUD ═══
  function startHUD() {
    missionStart = Date.now();
    buildCompass();
    buildSideTicks();
    buildDataStream();
    updateGeo();
    initOrientation();

    // Periodic geo update
    setInterval(updateGeo, 10000);

    requestAnimationFrame(updateHUD);
  }

})();
</script>
</body>
</html>
